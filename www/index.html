<!DOCTYPE html>
<!--
  index.html — Main application shell for the Health Navigation App

  Purpose:
  - Load core app shell elements (navigation bar, modal, content container)
  - Apply global styles and icon fonts
  - Provide Shadow DOM host (#content) where subpages are dynamically injected
-->
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>个人博客</title>
    <!-- Flatpickr date picker (CSS + JS) -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Google Fonts & Material Icons -->
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />

    <script>
      // Redirect to login page if user is not authenticated
      if (!localStorage.getItem("userId")) {
        window.location.href = "src/login.html";
      }
    </script>

    <link rel="stylesheet" href="./statics/css/index.css" />
    <link rel="stylesheet" href="./statics/css/add.css" />
    <!-- Material Symbols Rounded (used in navigation icons) -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0"
    />

    <!-- Force icon font styles to remain consistent even if overridden by subpages -->
    <style>
      /* Ensure Material Symbols render even if pages override font-family */
      .material-symbols-rounded {
        font-family: "Material Symbols Rounded" !important;
        font-weight: normal;
        font-style: normal;
        font-size: 24px;
        line-height: 1;
        display: inline-block;
        text-transform: none;
        letter-spacing: normal;
        white-space: nowrap;
        direction: ltr;
        -webkit-font-smoothing: antialiased;
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
      }

      /* Ensure iconfont-based icons stay visible regardless of subpage styles */
      .iconfont {
        font-family: "iconfont" !important;
        font-style: normal;
        font-weight: normal;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    </style>
  </head>

  <body>
    <!-- Main content area (Shadow DOM host) where subpages load -->
    <div class="content" id="content"></div>

    <!-- Bottom navigation bar -->
    <div class="nav-container" role="tablist" aria-label="主导航">
      <!-- Daily tab -->
      <div class="nav-item" data-index="0">
        <button
          class="icon ripple"
          role="tab"
          aria-selected="false"
          aria-label="日常"
          title="日常"
        >
          <span class="material-symbols-rounded">edit_note</span>
        </button>
        <div class="nav-label">日常</div>
      </div>
      <!-- Case tab -->
      <div class="nav-item" data-index="1">
        <button
          class="icon ripple"
          role="tab"
          aria-selected="false"
          aria-label="病例"
          title="病例"
        >
          <span class="material-symbols-rounded">assignment</span>
        </button>
        <div class="nav-label">病例</div>
      </div>

      <!-- Center Add button -->
      <div class="center-button-wrapper">
        <div
          class="center-button"
          id="centerBtn"
          aria-label="新增"
          title="新增"
        >
          <span class="material-symbols-rounded">add</span>
        </div>
      </div>

      <!-- Square tab -->
      <div class="nav-item" data-index="2">
        <button
          class="icon ripple"
          role="tab"
          aria-selected="false"
          aria-label="广场"
          title="广场"
        >
          <span class="material-symbols-rounded">landscape</span>
        </button>
        <div class="nav-label">广场</div>
      </div>
      <!-- Me tab -->
      <div class="nav-item" data-index="3">
        <button
          class="icon ripple"
          role="tab"
          aria-selected="false"
          aria-label="我的"
          title="我的"
        >
          <span class="material-symbols-rounded">person</span>
        </button>
        <div class="nav-label">我的</div>
      </div>

      <!-- Navigation active tab indicator -->
      <div class="indicator" id="indicator"></div>
    </div>

    <!-- Modal overlay and content container for center action -->
    <div class="modal" id="modal" style="display: none">
      <div class="modal-content" id="modalContent"></div>
    </div>

    <!-- App shell JavaScript: handles navigation, page loading, and modal interactions -->
    <script src="./statics/js/index.js"></script>
  </body>
</html>
